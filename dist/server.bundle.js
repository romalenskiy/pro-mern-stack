!function(e,n){for(var t in n)e[t]=n[t]}(exports,function(e){function n(e){var n=require("./"+e+"."+o+".hot-update.js");!function(e,n){if(!j[e]||!g[e])return;for(var t in g[e]=!1,n)Object.prototype.hasOwnProperty.call(n,t)&&(h[t]=n[t]);0==--y&&0===m&&x()}(n.id,n.modules)}var t,r=!0,o="eeb0f32946f4382da219",i={},s=[],c=[];function a(e){var n=D[e];if(!n)return E;var r=function(r){return n.hot.active?(D[r]?-1===D[r].parents.indexOf(e)&&D[r].parents.push(e):(s=[e],t=r),-1===n.children.indexOf(r)&&n.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),E(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return E[e]},set:function(n){E[e]=n}}};for(var i in E)Object.prototype.hasOwnProperty.call(E,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(e){return"ready"===l&&f("prepare"),m++,E.e(e).then(n,function(e){throw n(),e});function n(){m--,"prepare"===l&&(b[e]||_(e),0===m&&0===y&&x())}},r.t=function(e,n){return 1&n&&(e=r(e)),E.t(e,-2&n)},r}function u(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:O,apply:I,status:function(e){if(!e)return l;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var n=d.indexOf(e);n>=0&&d.splice(n,1)},data:i[e]};return t=void 0,n}var d=[],l="idle";function f(e){l=e;for(var n=0;n<d.length;n++)d[n].call(null,e)}var p,h,v,y=0,m=0,b={},g={},j={};function w(e){return+e+""===e?+e:e}function O(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return r=e,f("check"),function(){try{var e=require("./"+o+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return f("idle"),null;g={},b={},j=e.c,v=e.h,f("prepare");var n=new Promise(function(e,n){p={resolve:e,reject:n}});h={};return _(0),"prepare"===l&&0===m&&0===y&&x(),n})}function _(e){j[e]?(g[e]=!0,y++,n(e)):b[e]=!0}function x(){f("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return I(r)}).then(function(n){e.resolve(n)},function(n){e.reject(n)});else{var n=[];for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&n.push(w(t));e.resolve(n)}}function I(n){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var t,r,c,a,u;function d(e){for(var n=[e],t={},r=n.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,s=o.chain;if((a=D[i])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:i};if(a.hot._main)return{type:"unaccepted",chain:s,moduleId:i};for(var c=0;c<a.parents.length;c++){var u=a.parents[c],d=D[u];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:s.concat([u]),moduleId:i,parentId:u};-1===n.indexOf(u)&&(d.hot._acceptedDependencies[i]?(t[u]||(t[u]=[]),p(t[u],[i])):(delete t[u],n.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function p(e,n){for(var t=0;t<n.length;t++){var r=n[t];-1===e.indexOf(r)&&e.push(r)}}n=n||{};var y={},m=[],b={},g=function(){console.warn("[HMR] unexpected require("+_.moduleId+") to disposed module")};for(var O in h)if(Object.prototype.hasOwnProperty.call(h,O)){var _;u=w(O);var x=!1,I=!1,P=!1,H="";switch((_=h[O]?d(u):{type:"disposed",moduleId:O}).chain&&(H="\nUpdate propagation: "+_.chain.join(" -> ")),_.type){case"self-declined":n.onDeclined&&n.onDeclined(_),n.ignoreDeclined||(x=new Error("Aborted because of self decline: "+_.moduleId+H));break;case"declined":n.onDeclined&&n.onDeclined(_),n.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+_.moduleId+" in "+_.parentId+H));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(_),n.ignoreUnaccepted||(x=new Error("Aborted because "+u+" is not accepted"+H));break;case"accepted":n.onAccepted&&n.onAccepted(_),I=!0;break;case"disposed":n.onDisposed&&n.onDisposed(_),P=!0;break;default:throw new Error("Unexception type "+_.type)}if(x)return f("abort"),Promise.reject(x);if(I)for(u in b[u]=h[u],p(m,_.outdatedModules),_.outdatedDependencies)Object.prototype.hasOwnProperty.call(_.outdatedDependencies,u)&&(y[u]||(y[u]=[]),p(y[u],_.outdatedDependencies[u]));P&&(p(m,[_.moduleId]),b[u]=g)}var k,M=[];for(r=0;r<m.length;r++)u=m[r],D[u]&&D[u].hot._selfAccepted&&M.push({module:u,errorHandler:D[u].hot._selfAccepted});f("dispose"),Object.keys(j).forEach(function(e){!1===j[e]&&function(e){delete installedChunks[e]}(e)});for(var q,S,A=m.slice();A.length>0;)if(u=A.pop(),a=D[u]){var R={},T=a.hot._disposeHandlers;for(c=0;c<T.length;c++)(t=T[c])(R);for(i[u]=R,a.hot.active=!1,delete D[u],delete y[u],c=0;c<a.children.length;c++){var C=D[a.children[c]];C&&((k=C.parents.indexOf(u))>=0&&C.parents.splice(k,1))}}for(u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&(a=D[u]))for(S=y[u],c=0;c<S.length;c++)q=S[c],(k=a.children.indexOf(q))>=0&&a.children.splice(k,1);for(u in f("apply"),o=v,b)Object.prototype.hasOwnProperty.call(b,u)&&(e[u]=b[u]);var U=null;for(u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&(a=D[u])){S=y[u];var N=[];for(r=0;r<S.length;r++)if(q=S[r],t=a.hot._acceptedDependencies[q]){if(-1!==N.indexOf(t))continue;N.push(t)}for(r=0;r<N.length;r++){t=N[r];try{t(S)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:u,dependencyId:S[r],error:e}),n.ignoreErrored||U||(U=e)}}}for(r=0;r<M.length;r++){var F=M[r];u=F.module,s=[u];try{E(u)}catch(e){if("function"==typeof F.errorHandler)try{F.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:t,originalError:e}),n.ignoreErrored||U||(U=t),U||(U=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:u,error:e}),n.ignoreErrored||U||(U=e)}}return U?(f("fail"),Promise.reject(U)):(f("idle"),new Promise(function(e){e(m)}))}var D={};function E(n){if(D[n])return D[n].exports;var t=D[n]={i:n,l:!1,exports:{},hot:u(n),parents:(c=s,s=[],c),children:[]};return e[n].call(t.exports,t,t.exports,a(n)),t.l=!0,t.exports}return E.m=e,E.c=D,E.d=function(e,n,t){E.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},E.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},E.t=function(e,n){if(1&n&&(e=E(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(E.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)E.d(t,r,function(n){return e[n]}.bind(null,r));return t},E.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return E.d(n,"a",n),n},E.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},E.p="",E.h=function(){return o},a(7)(E.s=7)}([function(e,n){e.exports=require("express")},function(e,n){e.exports=require("react")},function(e,n){e.exports=require("mongodb")},function(e,n){var t="info";function r(){}function o(e){return"info"===t&&"info"===e||["info","warning"].indexOf(t)>=0&&"warning"===e||["info","warning","error"].indexOf(t)>=0&&"error"===e}function i(e){return function(n,t){o(n)&&e(t)}}e.exports=function(e,n){o(e)&&("info"===e?console.log(n):"warning"===e?console.warn(n):"error"===e&&console.error(n))};var s=console.group||r,c=console.groupCollapsed||r,a=console.groupEnd||r;e.exports.group=i(s),e.exports.groupCollapsed=i(c),e.exports.groupEnd=i(a),e.exports.setLogLevel=function(e){t=e}},function(e,n){e.exports=require("body-parser")},function(e,n){e.exports=require("react-dom/server")},function(e,n){e.exports=require("prop-types")},function(e,n,t){t(15),e.exports=t(13)},function(e,n){e.exports=require("webpack")},function(e,n){e.exports=require("webpack-dev-middleware")},function(e,n){e.exports=require("webpack-hot-middleware")},function(e,n,t){(function(n){var r=t(12);e.exports={entry:{app:["@babel/polyfill","./client/Client.jsx"]},output:{path:r.resolve(n,"static"),filename:"[name].bundle.js",chunkFilename:"[name].bundle.js"},module:{rules:[{test:/\.(js|jsx)$/,use:{loader:"babel-loader",options:{presets:["@babel/preset-react","@babel/preset-env"]}}}]},plugins:[],optimization:{splitChunks:{cacheGroups:{vendor:{test:/node_modules/,chunks:"initial",name:"vendor",enforce:!0}}}},devServer:{port:8e3,contentBase:"static",proxy:{"**":{target:"http://localhost:3000"}},historyApiFallback:!0},devtool:"source-map"}}).call(this,"/")},function(e,n){e.exports=require("path")},function(e,n,t){(function(n){var r=+n.substr(1)||6e5,o=t(3);setInterval(function n(r){"idle"===e.hot.status()&&e.hot.check(!0).then(function(e){e?(t(14)(e,e),n(!0)):r&&o("info","[HMR] Update applied.")}).catch(function(n){var t=e.hot.status();["abort","fail"].indexOf(t)>=0?(o("warning","[HMR] Cannot apply update."),o("warning","[HMR] "+(n.stack||n.message)),o("warning","[HMR] You need to restart the application!")):o("warning","[HMR] Update failed: "+(n.stack||n.message))})},r)}).call(this,"?1000")},function(e,n,t){e.exports=function(e,n){var r=e.filter(function(e){return n&&n.indexOf(e)<0}),o=t(3);(r.length>0&&(o("warning","[HMR] The following modules couldn't be hot updated: (They would need a full reload!)"),r.forEach(function(e){o("warning","[HMR]  - "+e)})),n&&0!==n.length)?(o("info","[HMR] Updated modules:"),n.forEach(function(e){if("string"==typeof e&&-1!==e.indexOf("!")){var n=e.split("!");o.groupCollapsed("info","[HMR]  - "+n.pop()),o("info","[HMR]  - "+e),o.groupEnd("info")}else o("info","[HMR]  - "+e)}),n.every(function(e){return"number"==typeof e})&&o("info","[HMR] Consider using the NamedModulesPlugin for module names.")):o("info","[HMR] Nothing hot updated.")}},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(4),s=t.n(i),c=t(2),a={New:!0,Open:!0,Assigned:!0,Fixed:!0,Verified:!0,Closed:!0},u={status:"required",owner:"required",effort:"optional",created:"required",completionDate:"optional",title:"required"};function d(e){var n={};return Object.keys(e).forEach(function(t){u[t]&&(n[t]=e[t])}),n}var l={validateIssue:function(e){var n=[];return Object.keys(u).forEach(function(t){"required"!==u[t]||e[t]||n.push("Missing mandatory field: ".concat(t,"!"))}),a[e.status]||n.push("".concat(e.status," is not a valid status!")),n.length?n.join("; "):null},cleanupIssue:d,convertIssue:function(e){return e.created&&(e.created=new Date(e.created)),e.completionDate&&(e.completionDate=new Date(e.completionDate)),d(e)}},f=t(1),p=t.n(f),h=t(5),v=t(6),y=t.n(v);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,n){return!n||"object"!==m(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,n){return(w=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var O=function(e){function n(e){var t;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=g(this,j(n).call(this,e))).state=Object.assign({},e),t}var t,r,o;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&w(e,n)}(n,p.a.Component),t=n,(r=[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({addressee:"Galaxy"})},3e3)}},{key:"render",value:function(){var e=this.state.addressee;return p.a.createElement("h1",null,"Hello ",e,"!")}}])&&b(t.prototype,r),o&&b(t,o),n}();O.propTypes={addressee:y.a.string},O.defaultProps={addressee:""};var _=O;var x=function(e,n){return'\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <meta http-equiv="X-UA-Compatible" content="ie=edge">\n      <title>Pro MERN Stack</title>\n      <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">\n      <style>\n        .panel-heading {\n          cursor: pointer;\n        }\n      </style>\n    </head>\n    <body>\n      <div id="contents">'.concat(e,"</div>\n\n      <script>window.__INITIAL_STATE__ = ").concat(JSON.stringify(n),'<\/script>\n      <script src="/app.bundle.js" ><\/script>\n      <script src="/vendor.bundle.js"><\/script>\n    </body>\n    </html>\n    ')},I=new o.a;I.get("*",function(e,n){var t={addressee:"Universe"},r=Object(h.renderToString)(p.a.createElement(_,t));n.send(x(r,t))});var D=I;t.d(n,"app",function(){return P}),t.d(n,"setDb",function(){return H});t(8),t(9),t(10),t(11);var E,P=o()();function H(e){E=e}P.use(o.a.static("static")),P.use(s.a.json()),P.set("json spaces",2),P.get("/api/issues",function(e,n){var t={},r=e.query;r.status&&(t.status=e.query.status),(r.effort_lte||r.effort_gte)&&(t.effort={}),r.effort_lte&&(t.effort.$lte=parseInt(r.effort_lte,10)),r.effort_gte&&(t.effort.$gte=parseInt(r.effort_gte,10)),E.collection("issues").find(t).toArray().then(function(e){var t={total_count:e.length};n.json({_metadata:t,records:e})}).catch(function(e){console.log(e),n.status(500).json({message:"Internal Server Error: ".concat(e)})})}),P.get("/api/issues/:id",function(e,n){var t;try{t=new c.ObjectId(e.params.id)}catch(e){return void n.status(422).json({message:"Invalid issue ID format: ".concat(e)})}E.collection("issues").findOne({_id:t}).then(function(e){e?n.json(e):n.status(404).json({message:"No such issue: ".concat(t)})}).catch(function(e){console.log(e),n.status(500).json({message:"Internal Server Error: ".concat(e)})})}),P.use("/",D),P.post("/api/issues",function(e,n){var t=e.body;t.created=new Date,t.status||(t.status="New");var r=l.validateIssue(t);r?n.status(422).json({message:"Invalid request: ".concat(r)}):E.collection("issues").insertOne(l.cleanupIssue(t)).then(function(e){return E.collection("issues").findOne({_id:e.insertedId})}).then(function(e){n.json(e)}).catch(function(e){n.status(500).json({message:"Internal Server Error: ".concat(e)})})}),P.put("/api/issues/:id",function(e,n){var t;try{t=new c.ObjectId(e.params.id)}catch(e){return void n.status(422).json({message:"Invalid issue ID format: ".concat(e)})}var r=e.body;delete r._id;var o=l.validateIssue(r);o?n.status(422).json({message:"Invalid request: ".concat(o)}):E.collection("issues").update({_id:t},l.convertIssue(r)).then(function(){return E.collection("issues").findOne({_id:t})}).then(function(e){return n.json(e)}).catch(function(e){console.log(e),n.status(500).json({message:"Internal Server Error: ".concat(e)})})}),P.delete("/api/issues/:id",function(e,n){var t;try{t=new c.ObjectId(e.params.id)}catch(e){return void n.status(422).json({message:"Invalid issue ID format: ".concat(e)})}E.collection("issues").deleteOne({_id:t}).then(function(e){1===e.result.n?n.json({status:"OK"}):n.json({status:"Warning: object not found!"})}).catch(function(e){console.log(e),n.status(500).json({message:"Internal Server Error: ".concat(e)})})})}]));
//# sourceMappingURL=server.bundle.js.map